#include <stdlib.h>
#include <stdio.h>
#include"queue.h"
#include"vector.h"
#include"num.h"
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ ПЕРЕХОДА НА СЛЕД ЭЛЕМЕНТ////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
QUEUE_IN *next_el_in_queue(QUEUE_IN *current)
{
    QUEUE_IN *next_el = current->next_in;
    return next_el;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ ПЕРЕХОДА НА СЛЕД ЭЛЕМЕНТ(OUT)///////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
QUEUE_OUT *next_el_out_queue(QUEUE_OUT *current)
{
    QUEUE_OUT *next_el = current->next_out;
    return next_el;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ УДАЛЕНЯИ ЭЛЕМЕНТА///////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
QUEUE_IN *del_in_queue(QUEUE_IN *current)
{
    QUEUE_IN *del=current;
    current=next_el_in_queue(current);
    free(del);
    return current;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ УДАЛЕНЯИ ЭЛЕМЕНТА(OUT)//////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
QUEUE_OUT *del_out_queue(QUEUE_OUT *current)
{
    QUEUE_OUT *del=current;
    current=next_el_out_queue(current);
    free(del);
    return current;
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ ДЛЯ ДОБАВЛЕНИЯ ЭЛЕМЕНТА ВВОДА///////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void add_el_in_queue(float *p_1, char d, float *p_2, int s, QUEUE_IN *tail_in_queue, QUEUE_IN *head_in_queue)
{
		QUEUE_IN *tmp=malloc(1*sizeof(QUEUE_IN));
		tmp->deistvie=d;
		tmp->size=s;
		if (d !='!')
		{
			tmp->peremenai_1=p_1;
			tmp->peremenai_2=p_2;
		}
		else
		{
			tmp->peremenai_1=p_1;
			tmp->peremenai_2=NULL;
		}
		tmp->next_in=NULL;
		if (tail_in_queue != NULL)
		{
			tail_in_queue->next_in=tmp;
			tail_in_queue=tmp;
		}
		else
		{
			head_in_queue=tmp;
			tail_in_queue=tmp;
		}
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////ФУНКЦИЯ ДЛЯ ДОБАВЛЕНИЯ ЭЛЕМЕНТА ВЫВОДА//////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void add_el_out_queue(QUEUE_OUT *head_out_queue, QUEUE_IN *head_in_queue, QUEUE_OUT *tail_out_queue)
{
    QUEUE_OUT *tmp_res=malloc(1*sizeof(QUEUE_OUT));
    if (head_in_queue->size>1)
    {
        tmp_res->size=head_in_queue->size;
        tmp_res->peremenai_1=head_in_queue->peremenai_1;
        tmp_res->deistvie=head_in_queue->deistvie;
        tmp_res->peremenai_2=head_in_queue->peremenai_2;
        tmp_res->rez=vector(head_in_queue->deistvie,head_in_queue->size,head_in_queue->peremenai_1,head_in_queue->peremenai_2);
    }
    else if (head_in_queue->size==1)
    {
        tmp_res->size=head_in_queue->size;
        tmp_res->peremenai_1=head_in_queue->peremenai_1;
        tmp_res->deistvie=head_in_queue->deistvie;
        tmp_res->peremenai_2=head_in_queue->peremenai_2;
        tmp_res->rez=num(head_in_queue->deistvie,head_in_queue->peremenai_1,head_in_queue->peremenai_2);
    }
    tmp_res->next_out=NULL;
    if (tail_out_queue != NULL)
    {
        tail_out_queue->next_out=tmp_res;
        tail_out_queue=tmp_res;
    }
    else
    {
        head_out_queue=tmp_res;
        tail_out_queue=tmp_res;
    }
}
